

<!doctype html>
<html lang="en" class="no-js">
  <head>
    

<meta charset="utf-8">



<!-- begin SEO -->









<title>Explaining SOLID principles with C# examples - Juan Pallarès Garbí</title>







<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Juan Pallarès Garbí">
<meta property="og:title" content="Explaining SOLID principles with C# examples">


  <link rel="canonical" href="https://juan.pallares.me/Explaining-SOLID-principles-with-C-examples/">
  <meta property="og:url" content="https://juan.pallares.me/Explaining-SOLID-principles-with-C-examples/">



  <meta property="og:description" content="SOLID are five basic principles for object-oriented programming and design. If applied, the solution is more likely to be easy to maintain and extend over time">



  <meta name="twitter:site" content="@juanpallares">
  <meta name="twitter:title" content="Explaining SOLID principles with C# examples">
  <meta name="twitter:description" content="SOLID are five basic principles for object-oriented programming and design. If applied, the solution is more likely to be easy to maintain and extend over time">
  <meta name="twitter:url" content="https://juan.pallares.me/Explaining-SOLID-principles-with-C-examples/">

  
    <meta name="twitter:card" content="summary">
    
      <meta name="twitter:image" content="https://juan.pallares.me/images/Untitled.png">
    
  

  



  

  





  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2015-03-15T00:00:00+01:00">
  
    <link rel="next" href="https://juan.pallares.me/mongodb-for-NET-M101N/" title="M101N MongoDB for .NET">
  
  
    <link rel="prev" href="https://juan.pallares.me/pair-programming/" title="Some thoughts about pair programming">
  



  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "url": "https://juan.pallares.me",
      "logo": "https://juan.pallares.me/images/Untitled.png"
    }
  </script>



  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "person",
      "name" : "Juan Pallarès Garbí",
      "url" : "https://juan.pallares.me",
      "sameAs" : ["https://twitter.com/juanpallares","https://www.linkedin.com/in/juanpallares"]
    }
  </script>






<!-- end SEO -->

<link href="https://juan.pallares.me/feed.xml" type="application/atom+xml" rel="alternate" title="Juan Pallarès Garbí Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="https://juan.pallares.me/assets/css/main.css">

<meta http-equiv="cleartype" content="on">
    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->
  </head>

  <body>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg"><a href="https://juan.pallares.me/">Juan Pallarès Garbí</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://juan.pallares.me/cv/">cv</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://juan.pallares.me/books/">books</a></li>
          
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    





<div id="main" role="main">
  


  <div class="sidebar sticky">
  



<div itemscope itemtype="http://schema.org/Person">

  <div class="author__avatar">
    
    	<img src="https://juan.pallares.me/images/juanpallares.jpg" class="author__avatar" alt="Juan Pallarès">
    
  </div>

  <div class="author__content">
    <h3 class="author__name">Juan Pallarès</h3>
    <p class="author__bio">Software Engineer, football and technology lover from Barcelona.</p>
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li><i class="fa fa-fw fa-map-marker" aria-hidden="true"></i> Barcelona</li>
      
      
      
        <li><a href="mailto:juan@pallares.me"><i class="fa fa-fw fa-envelope-square" aria-hidden="true"></i> </a></li>
      
      
      
      
      
        <li><a href="https://www.linkedin.com/in/juanpallares"><i class="fa fa-fw fa-linkedin-square" aria-hidden="true"></i> LinkedIn</a></li>
      
      
      
      
      
      
        <li><a href="https://github.com/jpallares"><i class="fa fa-fw fa-github" aria-hidden="true"></i> Github</a></li>
      
      
        <li><a href="https://gitlab.com/jpallares"><i class="fa fa-fw fa-gitlab" aria-hidden="true"></i> Gitlab</a></li>
      
      
        <li><a href="https://twitter.com/juanpallares"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
      
      
        <li><a href="https://www.stackoverflow.com/users/https://stackoverflow.com/users/500843/juan"><i class="fa fa-fw fa-stack-overflow" aria-hidden="true"></i> Stackoverflow</a></li>
      
      
      
      
      
      
      
      
      
      
      
      
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Explaining SOLID principles with C# examples">
    <meta itemprop="description" content="SOLID are five basic principles for object-oriented programming and design. If applied, the solution is more likely to be easy to maintain and extend over time">
    <meta itemprop="datePublished" content="March 15, 2015">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">Explaining SOLID principles with C# examples
</h1>
          
        </header>
      

      
        
        
      

      <section class="page__content" itemprop="text">
        <h3 id="what-is-solid">What is SOLID?</h3>

<p><a href="http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29">SOLID</a> are five basic principles for object-oriented programming and design. If applied, the solution is more likely to be easy to maintain and extend over time, which helps to create good software architecture. The SOLID acronym stands for:</p>

<ul>
  <li><strong>S</strong> - Single responsibility principle</li>
  <li><strong>O</strong> - Open closed principle</li>
  <li><strong>L</strong> - Liskov substitution principle</li>
  <li><strong>I</strong> - Interface segregation principle</li>
  <li><strong>D</strong> - Dependency inversion principle</li>
</ul>

<h3 id="single-responsability-principle-srp">Single responsability principle (SRP)</h3>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">public</span> <span class="k">class</span> <span class="nc">Engine</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="n">IgnitionResult</span> <span class="nf">Start</span><span class="p">(</span><span class="n">Starter</span> <span class="n">starter</span><span class="p">,</span> <span class="n">Battery</span> <span class="n">battery</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">//we would put code here to handle the logic for checking</span>
        <span class="c1">//whether or not the batter is charged</span>
 
        <span class="c1">//then we check the result of our logic</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">battery</span><span class="p">.</span><span class="n">IsCharged</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">//we could put logic here to handle</span>
            <span class="c1">//the actual ignition process</span>
            <span class="k">return</span> <span class="n">IgnitionResult</span><span class="p">.</span><span class="n">Success</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="c1">//uh oh! the battery is not charged</span>
            <span class="c1">//Failure!</span>
            <span class="k">return</span> <span class="n">IgnitionResult</span><span class="p">.</span><span class="n">Failure</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>What is wrong with the above code? Should we really have all the battery logic inside the start method? and the ignition process? No, we shouldn’t, it has multiple responsability.</p>

<p>Single responsabolity principle says that <strong>a class should only have one responsability</strong>. So the solution is moving the logic to the Starter and Battery classes and let the start method just start the engine.</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">public</span> <span class="k">class</span> <span class="nc">Engine</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="n">IgnitionResult</span> <span class="nf">Start</span><span class="p">(</span><span class="n">Starter</span> <span class="n">starter</span><span class="p">,</span> <span class="n">Battery</span> <span class="n">battery</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">starter</span><span class="p">.</span><span class="nf">Start</span><span class="p">(</span><span class="n">battery</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
 
<span class="k">public</span> <span class="k">class</span> <span class="nc">Starter</span>
<span class="p">{</span> 
    <span class="k">public</span> <span class="n">IgnitionResult</span> <span class="nf">Start</span><span class="p">(</span><span class="n">Battery</span> <span class="n">battery</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">//since the Battery class now contains that actual charge validation</span>
        <span class="c1">//logic, the Starter merely checks the value of that property</span>
        <span class="c1">//and the Battery takes care of the rest</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">battery</span><span class="p">.</span><span class="n">IsCharged</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">//we can put the ignition logic here</span>
            <span class="k">return</span> <span class="n">IgnitionResult</span><span class="p">.</span><span class="n">Success</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="n">IgnitionResult</span><span class="p">.</span><span class="n">Failure</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<h3 id="open-closed-principle-ocp">Open-closed principle (OCP)</h3>

<p>Following the same approach let’s see what’s wrong with this code:</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">class</span> <span class="nc">Customer</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="kt">int</span> <span class="n">_CustType</span><span class="p">;</span>

    <span class="k">public</span> <span class="kt">int</span> <span class="n">CustType</span>
    <span class="p">{</span>
        <span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="n">_CustType</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">set</span> <span class="p">{</span> <span class="n">_CustType</span> <span class="p">=</span> <span class="k">value</span><span class="p">;</span> <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="kt">double</span> <span class="nf">getDiscount</span><span class="p">(</span><span class="kt">double</span> <span class="n">TotalSales</span><span class="p">)</span>
    <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">_CustType</span> <span class="p">==</span> <span class="m">1</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">return</span> <span class="n">TotalSales</span> <span class="p">-</span> <span class="m">100</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="k">return</span> <span class="n">TotalSales</span> <span class="p">-</span> <span class="m">50</span><span class="p">;</span>
            <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>If in the future we want to add more customer types, we will need to modify the class adding more ifs. This class should be <strong>closed for modification open for extension</strong>. We fix the code crating a derived class SilverCustomer that will override the discount method. And when we get another Customer type? another derived class!:</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">class</span> <span class="nc">Customer</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">virtual</span> <span class="kt">double</span> <span class="nf">getDiscount</span><span class="p">(</span><span class="kt">double</span> <span class="n">TotalSales</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">TotalSales</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">SilverCustomer</span> <span class="p">:</span> <span class="n">Customer</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">override</span> <span class="kt">double</span> <span class="nf">getDiscount</span><span class="p">(</span><span class="kt">double</span> <span class="n">TotalSales</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">base</span><span class="p">.</span><span class="nf">getDiscount</span><span class="p">(</span><span class="n">TotalSales</span><span class="p">)</span> <span class="p">-</span> <span class="m">50</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<h3 id="liskov-substitution-principle-lsp">Liskov substitution principle (LSP)</h3>

<p><strong>Derived classes should be perfectly substitutable for their base classes</strong>.</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">namespace</span> <span class="nn">SolidDemo</span>
<span class="p">{</span>
    <span class="k">class</span> <span class="nc">Program</span>
    <span class="p">{</span>
        <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Apple</span> <span class="n">apple</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Orange</span><span class="p">();</span>
            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">apple</span><span class="p">.</span><span class="nf">GetColor</span><span class="p">());</span>
        <span class="p">}</span>
    <span class="p">}</span>
 
    <span class="k">public</span> <span class="k">class</span> <span class="nc">Apple</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="k">virtual</span> <span class="kt">string</span> <span class="nf">GetColor</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="s">"Red"</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
 
    <span class="k">public</span> <span class="k">class</span> <span class="nc">Orange</span> <span class="p">:</span> <span class="n">Apple</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="k">override</span> <span class="kt">string</span> <span class="nf">GetColor</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="s">"Orange"</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>In the above code an Orange cannot replace an Apple so the code doesn’t follow the Liskov principle. How can we fix it? Creating a generic base class for both fruits.</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">namespace</span> <span class="nn">SolidDemo</span>
<span class="p">{</span>
    <span class="k">class</span> <span class="nc">Program</span>
    <span class="p">{</span>
        <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Fruit</span> <span class="n">fruit</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Orange</span><span class="p">();</span>
            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">fruit</span><span class="p">.</span><span class="nf">GetColor</span><span class="p">());</span>
            <span class="n">fruit</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Apple</span><span class="p">();</span>
            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">fruit</span><span class="p">.</span><span class="nf">GetColor</span><span class="p">());</span>
        <span class="p">}</span>
    <span class="p">}</span>
 
    <span class="k">public</span> <span class="k">abstract</span> <span class="k">class</span> <span class="nc">Fruit</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="k">abstract</span> <span class="kt">string</span> <span class="nf">GetColor</span><span class="p">();</span>
    <span class="p">}</span>
 
    <span class="k">public</span> <span class="k">class</span> <span class="nc">Apple</span> <span class="p">:</span> <span class="n">Fruit</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="k">override</span> <span class="kt">string</span> <span class="nf">GetColor</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="s">"Red"</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
 
    <span class="k">public</span> <span class="k">class</span> <span class="nc">Orange</span> <span class="p">:</span> <span class="n">Apple</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="k">override</span> <span class="kt">string</span> <span class="nf">GetColor</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="s">"Orange"</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<h3 id="interface-segregation-principle-isp">Interface segregation principle (ISP)</h3>

<p>The goal behind ISP is that <strong>no client consuming an interface should be forced to depend on methods it does not use</strong>. For example, you might have a class that implements an interface called IPersist.</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">public</span> <span class="k">interface</span> <span class="nc">IPersist</span>
<span class="p">{</span>
	<span class="kt">bool</span> <span class="nf">Save</span><span class="p">(</span><span class="n">BookingDetails</span> <span class="n">reservation</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">BookingLog</span> <span class="p">:</span> <span class="n">IPersist</span>
<span class="p">{</span>
	<span class="k">public</span> <span class="kt">bool</span> <span class="nf">Save</span><span class="p">(</span><span class="n">BookingDetails</span> <span class="n">reservation</span><span class="p">)</span>
	<span class="p">{</span>
	   <span class="c1">// saving code.</span>
	   <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">public</span> <span class="k">void</span> <span class="nf">Log</span><span class="p">(</span><span class="n">BookingDetails</span> <span class="n">reservation</span><span class="p">)</span>
	<span class="p">{</span>
	   <span class="c1">// log code</span>
	<span class="p">}</span>

	<span class="k">public</span> <span class="k">void</span> <span class="nf">SendLogNotification</span><span class="p">(</span><span class="n">BookingDetails</span> <span class="n">reservation</span><span class="p">)</span>
	<span class="p">{</span>
	   <span class="c1">// notifying code</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Now if we update IPersist to include the two new methods we have in ReservationLog class, it might be useful for more implementations of IPersist.</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">public</span> <span class="k">interface</span> <span class="nc">IPersist</span>
<span class="p">{</span>
	<span class="kt">bool</span> <span class="nf">Save</span><span class="p">(</span><span class="n">BookingDetails</span> <span class="n">reservation</span><span class="p">);</span>
	<span class="k">void</span> <span class="nf">Log</span><span class="p">(</span><span class="n">BookingDetails</span> <span class="n">reservation</span><span class="p">);</span>
	<span class="k">void</span> <span class="nf">SendLogNotification</span><span class="p">(</span><span class="n">BookingDetails</span> <span class="n">reservation</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<p>Well…that was a mistake, now we are forcing all the classes that implement IPersist to implement methods they are not using. We are clearly breaking the interface segregation principle. In fact, IPersist is not just persisting (saving) now is also logging.</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">public</span> <span class="k">class</span> <span class="nc">BookingDatabase</span> <span class="p">:</span> <span class="n">IPersist</span>
<span class="p">{</span>
	<span class="k">public</span> <span class="kt">bool</span> <span class="nf">Save</span><span class="p">(</span><span class="n">BookingDetails</span> <span class="n">reservation</span><span class="p">)</span>
	<span class="p">{</span>
	   <span class="c1">// code to save on database</span>
	   <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="k">public</span> <span class="k">void</span> <span class="nf">Log</span><span class="p">(</span><span class="n">BookingDetails</span> <span class="n">reservation</span><span class="p">)</span>
	<span class="p">{</span>
	   <span class="k">throw</span> <span class="k">new</span> <span class="nf">NotImplementedException</span><span class="p">();</span>
	<span class="p">}</span>

	<span class="k">public</span> <span class="k">void</span> <span class="nf">SendLogNotification</span><span class="p">(</span><span class="n">ReservationDetails</span> <span class="n">reservation</span><span class="p">)</span>
	<span class="p">{</span>
	   <span class="k">throw</span> <span class="k">new</span> <span class="nf">NotImplementedException</span><span class="p">();</span>
	<span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>To fix it is really easy, we need a new interface to separate responsabilities. And then only the classes that need to log will implement the new interface.</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">public</span> <span class="k">interface</span> <span class="nc">ILog</span>
<span class="p">{</span>
   <span class="k">void</span> <span class="nf">Log</span><span class="p">(</span><span class="n">ReservationDetails</span> <span class="n">reservation</span><span class="p">);</span>
   <span class="k">void</span> <span class="nf">SendLogNotification</span><span class="p">(</span><span class="n">ReservationDetails</span> <span class="n">reservation</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">ReservationLog</span> <span class="p">:</span> <span class="n">IPersist</span><span class="p">,</span> <span class="n">ILog</span></code></pre></figure>

<h3 id="dependency-inversion-principle-dip">Dependency inversion principle (DIP)</h3>

<ul>
  <li><strong>High-level modules should not depend on low-level modules. Both should depend on abstractions.</strong></li>
  <li><strong>Abstractions should not depend upon details. Details should depend upon abstractions.</strong></li>
</ul>

<p>If we follow the Dependency inversion principle we will be able to build loosely coupled classes.</p>

<p>Let’s see an example that violates the principle:</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">public</span> <span class="k">class</span> <span class="nc">ProductService</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="n">ProductDiscount</span> <span class="n">_productDiscount</span><span class="p">;</span>
    <span class="k">private</span> <span class="n">ProductRepository</span> <span class="n">_productRepository</span><span class="p">;</span>
 
    <span class="k">public</span> <span class="nf">ProductService</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">_productDiscount</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ProductDiscount</span><span class="p">();</span>
        <span class="n">_productRepository</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ProductRepository</span><span class="p">();</span>
    <span class="p">}</span>
 
    <span class="k">public</span> <span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">Product</span><span class="p">&gt;</span> <span class="nf">GetProducts</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">Product</span><span class="p">&gt;</span> <span class="n">productsFromDataStore</span> <span class="p">=</span> <span class="n">_productRepository</span><span class="p">.</span><span class="nf">FindAll</span><span class="p">();</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="n">Product</span> <span class="n">p</span> <span class="k">in</span> <span class="n">productsFromDataStore</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">p</span><span class="p">.</span><span class="nf">AdjustPrice</span><span class="p">(</span><span class="n">_productDiscount</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">productsFromDataStore</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Notice high level modules call low level modules and instantiate their dependencies as they need them. Here ProductService calls ProductRepository, but before startintg it needs to create a new one up using the ‘new’ keyword. <strong>Two dependencies are created in the constructor with the ‘new’ keyword. This breaks the Single Responsibility Principle as the class is forced to carry out work that’s not really its concern.</strong></p>

<p>The ProductService is thus tightly coupled to those two concrete classes. Obtaining the correct pricing and data store strategy should not be the responsibility of the ProductService. And whenever those strategies change you must update the ProductService class. It is also difficult to test ProductService in isolation.</p>

<p>In order to remove the hard dependency we will inject in the constructor new abstractions that we will create for the discount and for the repository.</p>

<figure class="highlight"><pre><code class="language-c#" data-lang="c#"><span class="k">public</span> <span class="k">class</span> <span class="nc">ProductService</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="n">IProductRepository</span> <span class="n">_productRepository</span><span class="p">;</span>
 
    <span class="k">public</span> <span class="nf">ProductService</span><span class="p">(</span><span class="n">IProductRepository</span> <span class="n">productRepository</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">_productRepository</span> <span class="p">=</span> <span class="n">productRepository</span><span class="p">;</span>
    <span class="p">}</span>
 
    <span class="k">public</span> <span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">Product</span><span class="p">&gt;</span> <span class="nf">GetProducts</span><span class="p">(</span><span class="n">IProductDiscountStrategy</span> <span class="n">productDiscount</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">Product</span><span class="p">&gt;</span> <span class="n">productsFromDataStore</span> <span class="p">=</span> <span class="n">_productRepository</span><span class="p">.</span><span class="nf">FindAll</span><span class="p">();</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="n">Product</span> <span class="n">p</span> <span class="k">in</span> <span class="n">productsFromDataStore</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">p</span><span class="p">.</span><span class="nf">AdjustPrice</span><span class="p">(</span><span class="n">productDiscount</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">productsFromDataStore</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>Now anyone using Product Service will know they need an implementation of IProductRepository and IProductStrategy, but not an specific one.</p>

<h3 id="conclusion">Conclusion</h3>

<p>I hope the examples I picked were good enough to understand the SOLID principles. This was just an introduction, there is <a href="http://butunclebob.com/ArticleS.UncleBob.PrinciplesOfOod">much more detail available</a>.</p>


        
      </section>

      <footer class="page__meta">
        
        




        
          <p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> </strong> <time datetime="2015-03-15T00:00:00+01:00">March 15, 2015</time></p>
        
      </footer>

      

<section class="page__share">
  

  <a href="https://twitter.com/intent/tweet?text=https://juan.pallares.me/Explaining-SOLID-principles-with-C-examples/" class="btn btn--twitter" title=" Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https://juan.pallares.me/Explaining-SOLID-principles-with-C-examples/" class="btn btn--facebook" title=" Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://plus.google.com/share?url=https://juan.pallares.me/Explaining-SOLID-principles-with-C-examples/" class="btn btn--google-plus" title=" Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://juan.pallares.me/Explaining-SOLID-principles-with-C-examples/" class="btn btn--linkedin" title=" LinkedIn"><i class="fa fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>

      


  <nav class="pagination">
    
      <a href="https://juan.pallares.me/pair-programming/" class="pagination--pager" title="Some thoughts about pair programming
"></a>
    
    
      <a href="https://juan.pallares.me/mongodb-for-NET-M101N/" class="pagination--pager" title="M101N MongoDB for .NET
"></a>
    
  </nav>

    </div>

    
      

<div class="page__comments">
  <h4 class="page__comments-title"></h4>
  
    <section id="disqus_thread"></section>
  
</div>
    
  </article>

  
  
    <div class="page__related">
      
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  
    <a href="https://juan.pallares.me/serverless-common-issues-and-errors/">
  
    <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
      
        <div class="archive__item-teaser">
          <img src=
            
              "https://juan.pallares.me/images/black_keyboard.jpg"
            
            alt="">
        </div>
      
      <h2 class="archive__item-title" itemprop="headline">
        
          serverless common issues and errors

        
        
      </h2>
      
      
        <p class="archive__item-excerpt" itemprop="description">
          protected variables, custom domains, plugins order, using it locally…

          
          
        </p>
      
    </article>
  </a>
</div>
        
          



<div class="grid__item">
  
    <a href="https://juan.pallares.me/balance-2020/">
  
    <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
      
        <div class="archive__item-teaser">
          <img src=
            
              "https://juan.pallares.me/images/black_keyboard.jpg"
            
            alt="">
        </div>
      
      <h2 class="archive__item-title" itemprop="headline">
        
          Balance 2020

        
        
      </h2>
      
      
        <p class="archive__item-excerpt" itemprop="description">
          Lo más leído del año

          
          
        </p>
      
    </article>
  </a>
</div>
        
          



<div class="grid__item">
  
    <a href="https://juan.pallares.me/atomic-habits-james-clear/">
  
    <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
      
        <div class="archive__item-teaser">
          <img src=
            
              "https://juan.pallares.me/images/black_keyboard.jpg"
            
            alt="">
        </div>
      
      <h2 class="archive__item-title" itemprop="headline">
        
          Book - Atomic Habits - James Clear

        
        
      </h2>
      
      
        <p class="archive__item-excerpt" itemprop="description">
          Tiny changes - Remarkable results

          
          
        </p>
      
    </article>
  </a>
</div>
        
          



<div class="grid__item">
  
    <a href="https://juan.pallares.me/necesitas-un-gestor-de-contrasenas/">
  
    <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
      
        <div class="archive__item-teaser">
          <img src=
            
              "https://juan.pallares.me/images/black_keyboard.jpg"
            
            alt="">
        </div>
      
      <h2 class="archive__item-title" itemprop="headline">
        
          Necesitas un gestor de contraseñas

        
        
      </h2>
      
      
        <p class="archive__item-excerpt" itemprop="description">
          Navega más seguro y recuerda solo una contraseña.

          
          
        </p>
      
    </article>
  </a>
</div>
        
      </div>
    </div>
  
</div>

    <div class="page__footer">
      <footer>
        

<div class="page__footer-follow">
  <ul class="social-icons">
    
    
      <li><a href="https://twitter.com/juanpallares"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
    
    
    
      <li><a href="http://github.com/jpallares"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    <li><a href="https://juan.pallares.me/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> </a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2021 Juan Pallarès Garbí.  <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>
      </footer>
    </div>

    <script src="https://juan.pallares.me/assets/js/main.min.js"></script>




  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54458401-1', 'auto');
  ga('send', 'pageview');
</script>






  
  <script type="text/javascript">
  	/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  	var disqus_shortname = 'jpallares';

  	/* * * DON'T EDIT BELOW THIS LINE * * */
  	(function() {
  		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  	})();

  	/* * * DON'T EDIT BELOW THIS LINE * * */
  	(function () {
  		var s = document.createElement('script'); s.async = true;
  		s.type = 'text/javascript';
  		s.src = '//' + disqus_shortname + '.disqus.com/count.js';
  		(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  	}());
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>






    <!-- start custom footer snippets -->

<!-- end custom footer snippets -->

  </body>
</html>

