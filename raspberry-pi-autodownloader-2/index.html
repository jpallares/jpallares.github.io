

<!doctype html>
<html lang="en" class="no-js">
  <head>
    

<meta charset="utf-8">



<!-- begin SEO -->









<title>Raspberry Pi 3 a.k.a the 24/7 auto downloader II - Juan Pallarès Garbí</title>







<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Juan Pallarès Garbí">
<meta property="og:title" content="Raspberry Pi 3 a.k.a the 24/7 auto downloader II">


  <link rel="canonical" href="https://juan.pallares.me/raspberry-pi-autodownloader-2/">
  <meta property="og:url" content="https://juan.pallares.me/raspberry-pi-autodownloader-2/">



  <meta property="og:description" content="Series of posts in which I’ll explain how the raspberry downloads automatically all my tv shows and movies, also the subtitle and the media in an unattended …">



  <meta name="twitter:site" content="@juanpallares">
  <meta name="twitter:title" content="Raspberry Pi 3 a.k.a the 24/7 auto downloader II">
  <meta name="twitter:description" content="Series of posts in which I’ll explain how the raspberry downloads automatically all my tv shows and movies, also the subtitle and the media in an unattended …">
  <meta name="twitter:url" content="https://juan.pallares.me/raspberry-pi-autodownloader-2/">

  
    <meta name="twitter:card" content="summary">
    
      <meta name="twitter:image" content="https://juan.pallares.me/images/Untitled.png">
    
  

  



  

  





  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2017-05-03T00:00:00+02:00">
  
    <link rel="next" href="https://juan.pallares.me/raspberry-pi-hole-vpn/" title="Raspberry Pi 3 III Pi-hole PiVPN">
  
  
    <link rel="prev" href="https://juan.pallares.me/raspberry-pi-autodownloader/" title="Raspberry Pi 3 a.k.a the 24/7 auto downloader">
  



  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "url": "https://juan.pallares.me",
      "logo": "https://juan.pallares.me/images/Untitled.png"
    }
  </script>



  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "person",
      "name" : "Juan Pallarès Garbí",
      "url" : "https://juan.pallares.me",
      "sameAs" : ["https://twitter.com/juanpallares","https://www.linkedin.com/in/juanpallares"]
    }
  </script>






<!-- end SEO -->

<link href="https://juan.pallares.me/feed.xml" type="application/atom+xml" rel="alternate" title="Juan Pallarès Garbí Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="https://juan.pallares.me/assets/css/main.css">

<meta http-equiv="cleartype" content="on">
    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->
  </head>

  <body>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg"><a href="https://juan.pallares.me/">Juan Pallarès Garbí</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://juan.pallares.me/cv/">cv</a></li>
          
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    





<div id="main" role="main">
  


  <div class="sidebar sticky">
  



<div itemscope itemtype="http://schema.org/Person">

  <div class="author__avatar">
    
    	<img src="https://juan.pallares.me/images/juanpallares.jpg" class="author__avatar" alt="Juan Pallarès">
    
  </div>

  <div class="author__content">
    <h3 class="author__name">Juan Pallarès</h3>
    <p class="author__bio">Software Engineer, football and technology lover from Barcelona.</p>
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li><i class="fa fa-fw fa-map-marker" aria-hidden="true"></i> Barcelona</li>
      
      
      
        <li><a href="mailto:juan@pallares.me"><i class="fa fa-fw fa-envelope-square" aria-hidden="true"></i> </a></li>
      
      
      
        <li><a href="https://twitter.com/juanpallares"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
      
      
      
      
        <li><a href="https://www.linkedin.com/in/juanpallares"><i class="fa fa-fw fa-linkedin-square" aria-hidden="true"></i> LinkedIn</a></li>
      
      
      
      
      
      
        <li><a href="https://github.com/jpallares"><i class="fa fa-fw fa-github" aria-hidden="true"></i> Github</a></li>
      
      
        <li><a href="https://www.stackoverflow.com/users/https://stackoverflow.com/users/500843/juan"><i class="fa fa-fw fa-stack-overflow" aria-hidden="true"></i> Stackoverflow</a></li>
      
      
      
      
      
      
      
      
      
      
      
      
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Raspberry Pi 3 a.k.a the 24/7 auto downloader II">
    <meta itemprop="description" content="Series of posts in which I’ll explain how the raspberry downloads automatically all my tv shows and movies, also the subtitle and the media in an unattended …">
    <meta itemprop="datePublished" content="May 03, 2017">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">Raspberry Pi 3 a.k.a the 24/7 auto downloader II
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        <p>Following the guide to have a Raspberry hadling all the media downloads at home, let’s continue:</p>

<h3 id="bittorrent-client">BitTorrent client</h3>

<p>There are several options available for downloading torrents. The one I chose is <a href="http://deluge-torrent.org/">Deluge</a> because of being free, light-weight and ad-free. It also has a “client-server” mode very useful for head-less raspberry and some plugins available that make it very flexible.</p>

<p>The <a href="https://tektab.com/2015/11/10/running-a-always-on-torrent-box-with-raspberry-pi-deluge-on-raspbian/">installation</a> is pretty straightforward and after it you will be able to control it from a client you can install on windows/mac/linux. Also a webUI is available. In case your are intesred, here you have some <a href="http://dev.deluge-torrent.org/wiki/UserGuide/Service/systemd">useful data</a> for a more advanced installation. Remember to configure it to download the torrents to the disk we mounted in the <a href="http://juan.pallares.me/Raspbery-pi-aka-the-247-auto-downloader/">previous post</a>, unless you want to run out of space in the pi very fast.</p>

<h3 id="tv-shows---sonarr">TV shows - Sonarr</h3>

<p><img src="../images/sonarr1.PNG" alt="Sonarr" title="Sonarr" /></p>

<p><a href="https://sonarr.tv/">Sonarr</a> will handle all the TV shows downloads. I’m in love with Sonarr and the moment you start using it you will feel the same. The <a href="https://www.htpcguides.com/install-sonarr-raspberry-pi-mono-310/">installation</a> is a little bit more tricky since it involves Mono. Once you have it running, remember to configure it to use the deluge client you installed before (or any other you chose).</p>

<p class="notice">Skip the configuration about moving/renaming in Sonarr and CouchPotato. Filebot will handle it</p>

<p>Also you need to set up some indexers for the content (rarbg in my case at the time of writing). After that is easy, just add the shows you are interested in and the quality you want and they will be downloaded automatically when released, skip the part about moving/renaming for the moment. A calendar will be created:</p>

<p><img src="../images/sonarr2.PNG" alt="Sonarr calendar" title="Sonarr calendar" /></p>

<p>If it wasn’t enough you can also configure notification in “Connections”. In my case I have pushbullet telling me when a TV show has been grabbed. Later you will see this is not necessary with Filebot.</p>

<h3 id="movies---couch-potato">Movies - Couch Potato</h3>

<p>My love doesn’t go only to Sonarr, <a href="https://couchpota.to/">CouchPotato</a> is also deep in my heart, I guess I have “software polygamy”. Downloading movies will become very easy.</p>

<p><img src="../images/couchpotato.PNG" alt="Couch Potato" title="Couch Potato" /></p>

<p>After a very easy installation, the configuration is similar to Sonarr, set you downloader (deluge), indexers and were to download the movies. Skip the part about moving/renaming like before. Once configured what CouchPotato will do for you is download the movies you are interested in the moment they are available in a good enough quality (can be configured), add them to your wanted list and go to the cinema only when really necessary. You can also automatically add movies that have more than an 8 in IMDB….boom!</p>

<h3 id="moving-and-renaming-media-and-getting-subtitles---filebot">Moving and renaming media and getting subtitles - Filebot</h3>

<p>And the last part, we got the movies, the shows but they have strange names, you still need subtitles and the media is placed in a downloads folder….<a href="http://www.filebot.net/">Filebot</a> “the ultimate tv renamer / subtitle downloader” comes to rescue you.</p>

<p>Ok, it’s true, Sonarr and CouchPotato can do the renaming and moving on their own but what about the subtitles? and what about having a software specialized for that? much better isn’t it?</p>

<p><a href="https://www.filebot.net/forums/viewtopic.php?t=3974">Installation on the pi</a> has some difficulty but if I did it you can. Remember to set it up with you OpenSubtitles user.</p>

<p>After it, I use Filebot with commands, scripts I configured, not the UI. In Deluge you need to install the <a href="https://www.filebot.net/forums/viewtopic.php?t=3974">Execute plugin</a>. This plugin allows you to run a script after downloading a file, and that’s what we will do:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

<span class="nv">torrentid</span><span class="o">=</span><span class="nv">$1</span>
<span class="nv">torrentname</span><span class="o">=</span><span class="nv">$2</span>
<span class="nv">torrentpath</span><span class="o">=</span><span class="nv">$3</span>

/usr/share/filebot/filebot.sh <span class="nt">-script</span> fn:amc <span class="nt">--output</span> <span class="s2">"/media/netdisk/PlexMedia"</span> <span class="nt">--log-file</span> /home/pi/amc.log <span class="nt">--action</span> move <span class="nt">--conflict</span> override <span class="nt">-non-strict</span> <span class="nt">--def</span> <span class="nv">subtitles</span><span class="o">=</span>en,es <span class="nv">artwork</span><span class="o">=</span>y <span class="nv">clean</span><span class="o">=</span>y <span class="nv">reportError</span><span class="o">=</span>y <span class="nv">gmail</span><span class="o">=</span>esbroma:XXXXXXXXXXX <span class="nv">pushbullet</span><span class="o">=</span>XXXXXXXXXXXX <span class="s2">"ut_dir=</span><span class="nv">$torrentpath</span><span class="s2">/</span><span class="nv">$torrentname</span><span class="s2">"</span> <span class="s2">"ut_kind=multi"</span> <span class="s2">"ut_title=</span><span class="nv">$torrentname</span><span class="s2">"</span>
</code></pre></div></div>
<p>Basically, the script.sh is moving the media to the PlexMedia folder, there will create a folder for Movies and other for Tv Shows, inside them a folder per movie/tv show and inside TV shows a folder per season. It will also rename it, grab subtitles (if available) in this case in english and spanish. It will also notify me by email and by pushbullet. As you may have noticed, a log is created to track possible issues.</p>

<p>Another possible script you can configure is one that looks for subtitles from time to time. It can be necessary because very often you will download media freshly released and the subtitles won’t be available yet.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>

/usr/share/filebot/filebot.sh <span class="nt">-script</span> fn:suball <span class="s2">"/media/netdisk/PlexMedia"</span> <span class="nt">--log-file</span> /home/pi/subtitle.log <span class="nt">-non-strict</span> <span class="nt">--def</span> <span class="nv">maxAgeDays</span><span class="o">=</span>7 <span class="nv">subtitles</span><span class="o">=</span>en,es <span class="nv">ignoreTextLanguage</span><span class="o">=</span>en,es <span class="nv">reportError</span><span class="o">=</span>y <span class="nv">pushbullet</span><span class="o">=</span>XXXXXXXXXXXX
</code></pre></div></div>
<p>In this example, I’m looking for missing subtitles in media that is one week older at most.</p>

<h3 id="playing-the-media---plex-on-the-pi">Playing the media - Plex on the Pi?</h3>
<p>Ok, now that we have everything, we want to play it, I prefer Plex over Kodi, because of my own needs but feel free to use any player you want, even DLNA would work.</p>

<p>I tried to <a href="https://raspberrypi.stackexchange.com/questions/50031/raspberry-pi-3-as-plex-media-server-local-without-transcoding">use Plex on the raspberri pi</a>, and did some <a href="https://www.raspberrypi.org/forums/viewtopic.php?f=35&amp;t=151924&amp;p=999730#p999730">research</a> to see if it was possible. But no luck, only with media that is not too high quality. At the end I run Plex on another computer that uses the media on the net disk. Is in this Plex server where I installed SubZero channel, it will help you download subtitles too (yes I hate searching and adding subtitles manually).</p>

<p>And that’s it regarding auto-downloading media, but I still have a couple things to show you about the Raspberry Pi, you will have to wait for next post though.</p>

        
      </section>

      <footer class="page__meta">
        
        




        
          <p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> </strong> <time datetime="2017-05-03T00:00:00+02:00">May 03, 2017</time></p>
        
      </footer>

      

<section class="page__share">
  

  <a href="https://twitter.com/intent/tweet?text=https://juan.pallares.me/raspberry-pi-autodownloader-2/" class="btn btn--twitter" title=" Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https://juan.pallares.me/raspberry-pi-autodownloader-2/" class="btn btn--facebook" title=" Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://plus.google.com/share?url=https://juan.pallares.me/raspberry-pi-autodownloader-2/" class="btn btn--google-plus" title=" Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://juan.pallares.me/raspberry-pi-autodownloader-2/" class="btn btn--linkedin" title=" LinkedIn"><i class="fa fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>

      


  <nav class="pagination">
    
      <a href="https://juan.pallares.me/raspberry-pi-autodownloader/" class="pagination--pager" title="Raspberry Pi 3 a.k.a the 24/7 auto downloader
"></a>
    
    
      <a href="https://juan.pallares.me/raspberry-pi-hole-vpn/" class="pagination--pager" title="Raspberry Pi 3 III Pi-hole PiVPN
"></a>
    
  </nav>

    </div>

    
      

<div class="page__comments">
  <h4 class="page__comments-title"></h4>
  
    <section id="disqus_thread"></section>
  
</div>
    
  </article>

  
  
    <div class="page__related">
      
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  
    <a href="https://juan.pallares.me/why-i-became-a-bogglehead/">
  
    <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
      
        <div class="archive__item-teaser">
          <img src=
            
              "https://juan.pallares.me/images/black_keyboard.jpg"
            
            alt="">
        </div>
      
      <h2 class="archive__item-title" itemprop="headline">Investing in index funds. Why I became a boglehead
</h2>
      
      <p class="archive__item-excerpt" itemprop="description">A good investment strategy does not have to be difficult.
</p>
    </article>
  </a>
</div>
        
          



<div class="grid__item">
  
    <a href="https://juan.pallares.me/merge-request-handling-remotely-via-slack-channel-copy/">
  
    <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
      
        <div class="archive__item-teaser">
          <img src=
            
              "https://juan.pallares.me/images/black_keyboard.jpg"
            
            alt="">
        </div>
      
      <h2 class="archive__item-title" itemprop="headline">Merge request handling via slack channel
</h2>
      
      <p class="archive__item-excerpt" itemprop="description">How we decided to manage the MR now that we work remotely
</p>
    </article>
  </a>
</div>
        
          



<div class="grid__item">
  
    <a href="https://juan.pallares.me/remote-working-tips/">
  
    <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
      
        <div class="archive__item-teaser">
          <img src=
            
              "https://juan.pallares.me/images/black_keyboard.jpg"
            
            alt="">
        </div>
      
      <h2 class="archive__item-title" itemprop="headline">Remote working tips (COVID-19)
</h2>
      
      <p class="archive__item-excerpt" itemprop="description">Sharing my experience after 4 weeks of working remotely (and confined)
</p>
    </article>
  </a>
</div>
        
          



<div class="grid__item">
  
    <a href="https://juan.pallares.me/raspberry-pi-hole-vpn/">
  
    <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
      
        <div class="archive__item-teaser">
          <img src=
            
              "https://juan.pallares.me/images/black_keyboard.jpg"
            
            alt="">
        </div>
      
      <h2 class="archive__item-title" itemprop="headline">Raspberry Pi 3 III Pi-hole PiVPN
</h2>
      
      <p class="archive__item-excerpt" itemprop="description">Filter all the ads in you local net (Pi-Hole) and create VPN server (PiVPN)
</p>
    </article>
  </a>
</div>
        
      </div>
    </div>
  
</div>

    <div class="page__footer">
      <footer>
        

<div class="page__footer-follow">
  <ul class="social-icons">
    
    
      <li><a href="https://twitter.com/juanpallares"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
    
    
    
      <li><a href="http://github.com/jpallares"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    <li><a href="https://juan.pallares.me/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> </a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2020 Juan Pallarès Garbí.  <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>
      </footer>
    </div>

    <script src="https://juan.pallares.me/assets/js/main.min.js"></script>




  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54458401-1', 'auto');
  ga('send', 'pageview');
</script>






  
  <script type="text/javascript">
  	/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  	var disqus_shortname = 'jpallares';

  	/* * * DON'T EDIT BELOW THIS LINE * * */
  	(function() {
  		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  	})();

  	/* * * DON'T EDIT BELOW THIS LINE * * */
  	(function () {
  		var s = document.createElement('script'); s.async = true;
  		s.type = 'text/javascript';
  		s.src = '//' + disqus_shortname + '.disqus.com/count.js';
  		(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  	}());
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>






    <!-- start custom footer snippets -->

<!-- end custom footer snippets -->

  </body>
</html>

